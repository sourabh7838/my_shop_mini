{"version":3,"file":"version.js","sourceRoot":"","sources":["../../../src/public/node/version.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,gBAAgB,EAAC,MAAM,iCAAiC,CAAA;AAChE,OAAO,EAAC,aAAa,EAAC,MAAM,mBAAmB,CAAA;AAE/C;;;;;GAKG;AACH,MAAM,CAAC,KAAK,UAAU,eAAe,CAAC,SAAiB;IACrD,IAAI;QACF,MAAM,MAAM,GAAG,MAAM,aAAa,CAAC,KAAK,EAAE,CAAC,MAAM,EAAE,cAAc,CAAC,EAAE,EAAC,GAAG,EAAE,SAAS,EAAC,CAAC,CAAA;QACrF,OAAO,MAAM,CAAC,KAAK,CAAC,yBAAyB,CAAC,EAAE,CAAC,CAAC,CAAC,CAAA;QACnD,qDAAqD;KACtD;IAAC,MAAM;QACN,OAAO,SAAS,CAAA;KACjB;AACH,CAAC;AAED;;;;GAIG;AACH,MAAM,CAAC,KAAK,UAAU,gBAAgB;IACpC,IAAI;QACF,MAAM,GAAG,GAAG,EAAC,GAAG,OAAO,CAAC,GAAG,EAAE,wBAAwB,EAAE,GAAG,EAAC,CAAA;QAC3D,MAAM,OAAO,GAAG,MAAM,aAAa,CAAC,SAAS,EAAE,CAAC,SAAS,CAAC,EAAE,EAAC,GAAG,EAAC,CAAC,CAAA;QAClE,IAAI,gBAAgB,CAAC,OAAO,EAAE,UAAU,CAAC,EAAE;YACzC,OAAO,OAAO,CAAA;SACf;QACD,OAAO,SAAS,CAAA;QAChB,qDAAqD;KACtD;IAAC,MAAM;QACN,OAAO,SAAS,CAAA;KACjB;AACH,CAAC","sourcesContent":["import {versionSatisfies} from '../node/node-package-manager.js'\nimport {captureOutput} from '../node/system.js'\n\n/**\n * Returns the version of the local dependency of the CLI if it's installed in the provided directory.\n *\n * @param directory - Path of the project to look for the dependency.\n * @returns The CLI version or undefined if the dependency is not installed.\n */\nexport async function localCLIVersion(directory: string): Promise<string | undefined> {\n  try {\n    const output = await captureOutput('npm', ['list', '@shopify/cli'], {cwd: directory})\n    return output.match(/@shopify\\/cli@([\\w.-]*)/)?.[1]\n    // eslint-disable-next-line no-catch-all/no-catch-all\n  } catch {\n    return undefined\n  }\n}\n\n/**\n * Returns the version of the globally installed CLI, only if it's greater than 3.59.0 (when the global CLI was introduced).\n *\n * @returns The version of the CLI if it is globally installed or undefined.\n */\nexport async function globalCLIVersion(): Promise<string | undefined> {\n  try {\n    const env = {...process.env, SHOPIFY_CLI_NO_ANALYTICS: '1'}\n    const version = await captureOutput('shopify', ['version'], {env})\n    if (versionSatisfies(version, `>=3.59.0`)) {\n      return version\n    }\n    return undefined\n    // eslint-disable-next-line no-catch-all/no-catch-all\n  } catch {\n    return undefined\n  }\n}\n"]}
{"version":3,"file":"index.js","sources":["../../../../../../../../node_modules/.pnpm/@radix-ui+react-avatar@1.1.10_@types+react-dom@19.1.6_@types+react@19.1.6__@types+react@19.1._hkz57sehyui4ndfh3rsqwxftli/node_modules/@radix-ui/react-avatar/dist/index.mjs"],"sourcesContent":["\"use client\";\n\n// src/avatar.tsx\nimport * as React from \"react\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { useLayoutEffect } from \"@radix-ui/react-use-layout-effect\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { useIsHydrated } from \"@radix-ui/react-use-is-hydrated\";\nimport { jsx } from \"react/jsx-runtime\";\nvar AVATAR_NAME = \"Avatar\";\nvar [createAvatarContext, createAvatarScope] = createContextScope(AVATAR_NAME);\nvar [AvatarProvider, useAvatarContext] = createAvatarContext(AVATAR_NAME);\nvar Avatar = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAvatar, ...avatarProps } = props;\n    const [imageLoadingStatus, setImageLoadingStatus] = React.useState(\"idle\");\n    return /* @__PURE__ */ jsx(\n      AvatarProvider,\n      {\n        scope: __scopeAvatar,\n        imageLoadingStatus,\n        onImageLoadingStatusChange: setImageLoadingStatus,\n        children: /* @__PURE__ */ jsx(Primitive.span, { ...avatarProps, ref: forwardedRef })\n      }\n    );\n  }\n);\nAvatar.displayName = AVATAR_NAME;\nvar IMAGE_NAME = \"AvatarImage\";\nvar AvatarImage = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAvatar, src, onLoadingStatusChange = () => {\n    }, ...imageProps } = props;\n    const context = useAvatarContext(IMAGE_NAME, __scopeAvatar);\n    const imageLoadingStatus = useImageLoadingStatus(src, imageProps);\n    const handleLoadingStatusChange = useCallbackRef((status) => {\n      onLoadingStatusChange(status);\n      context.onImageLoadingStatusChange(status);\n    });\n    useLayoutEffect(() => {\n      if (imageLoadingStatus !== \"idle\") {\n        handleLoadingStatusChange(imageLoadingStatus);\n      }\n    }, [imageLoadingStatus, handleLoadingStatusChange]);\n    return imageLoadingStatus === \"loaded\" ? /* @__PURE__ */ jsx(Primitive.img, { ...imageProps, ref: forwardedRef, src }) : null;\n  }\n);\nAvatarImage.displayName = IMAGE_NAME;\nvar FALLBACK_NAME = \"AvatarFallback\";\nvar AvatarFallback = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAvatar, delayMs, ...fallbackProps } = props;\n    const context = useAvatarContext(FALLBACK_NAME, __scopeAvatar);\n    const [canRender, setCanRender] = React.useState(delayMs === void 0);\n    React.useEffect(() => {\n      if (delayMs !== void 0) {\n        const timerId = window.setTimeout(() => setCanRender(true), delayMs);\n        return () => window.clearTimeout(timerId);\n      }\n    }, [delayMs]);\n    return canRender && context.imageLoadingStatus !== \"loaded\" ? /* @__PURE__ */ jsx(Primitive.span, { ...fallbackProps, ref: forwardedRef }) : null;\n  }\n);\nAvatarFallback.displayName = FALLBACK_NAME;\nfunction resolveLoadingStatus(image, src) {\n  if (!image) {\n    return \"idle\";\n  }\n  if (!src) {\n    return \"error\";\n  }\n  if (image.src !== src) {\n    image.src = src;\n  }\n  return image.complete && image.naturalWidth > 0 ? \"loaded\" : \"loading\";\n}\nfunction useImageLoadingStatus(src, { referrerPolicy, crossOrigin }) {\n  const isHydrated = useIsHydrated();\n  const imageRef = React.useRef(null);\n  const image = (() => {\n    if (!isHydrated) return null;\n    if (!imageRef.current) {\n      imageRef.current = new window.Image();\n    }\n    return imageRef.current;\n  })();\n  const [loadingStatus, setLoadingStatus] = React.useState(\n    () => resolveLoadingStatus(image, src)\n  );\n  useLayoutEffect(() => {\n    setLoadingStatus(resolveLoadingStatus(image, src));\n  }, [image, src]);\n  useLayoutEffect(() => {\n    const updateStatus = (status) => () => {\n      setLoadingStatus(status);\n    };\n    if (!image) return;\n    const handleLoad = updateStatus(\"loaded\");\n    const handleError = updateStatus(\"error\");\n    image.addEventListener(\"load\", handleLoad);\n    image.addEventListener(\"error\", handleError);\n    if (referrerPolicy) {\n      image.referrerPolicy = referrerPolicy;\n    }\n    if (typeof crossOrigin === \"string\") {\n      image.crossOrigin = crossOrigin;\n    }\n    return () => {\n      image.removeEventListener(\"load\", handleLoad);\n      image.removeEventListener(\"error\", handleError);\n    };\n  }, [image, crossOrigin, referrerPolicy]);\n  return loadingStatus;\n}\nvar Root = Avatar;\nvar Image = AvatarImage;\nvar Fallback = AvatarFallback;\nexport {\n  Avatar,\n  AvatarFallback,\n  AvatarImage,\n  Fallback,\n  Image,\n  Root,\n  createAvatarScope\n};\n//# sourceMappingURL=index.mjs.map\n"],"names":["AVATAR_NAME","createAvatarContext","createAvatarScope","createContextScope","AvatarProvider","useAvatarContext","Avatar","React","props","forwardedRef","__scopeAvatar","avatarProps","imageLoadingStatus","setImageLoadingStatus","jsx","Primitive","IMAGE_NAME","AvatarImage","src","onLoadingStatusChange","imageProps","context","useImageLoadingStatus","handleLoadingStatusChange","useCallbackRef","status","useLayoutEffect","FALLBACK_NAME","AvatarFallback","delayMs","fallbackProps","canRender","setCanRender","timerId","resolveLoadingStatus","image","referrerPolicy","crossOrigin","isHydrated","useIsHydrated","imageRef","loadingStatus","setLoadingStatus","updateStatus","handleLoad","handleError","Root","Image","Fallback"],"mappings":"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","x_google_ignoreList":[0]}
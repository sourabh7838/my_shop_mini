{"version":3,"file":"index.js","sources":["../../../../../../../../node_modules/.pnpm/@radix-ui+react-focus-scope@1.1.7_@types+react-dom@19.1.6_@types+react@19.1.6__@types+react@1_zpdtvgogfsfavk62phevpdv4fu/node_modules/@radix-ui/react-focus-scope/dist/index.mjs"],"sourcesContent":["\"use client\";\n\n// src/focus-scope.tsx\nimport * as React from \"react\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { jsx } from \"react/jsx-runtime\";\nvar AUTOFOCUS_ON_MOUNT = \"focusScope.autoFocusOnMount\";\nvar AUTOFOCUS_ON_UNMOUNT = \"focusScope.autoFocusOnUnmount\";\nvar EVENT_OPTIONS = { bubbles: false, cancelable: true };\nvar FOCUS_SCOPE_NAME = \"FocusScope\";\nvar FocusScope = React.forwardRef((props, forwardedRef) => {\n  const {\n    loop = false,\n    trapped = false,\n    onMountAutoFocus: onMountAutoFocusProp,\n    onUnmountAutoFocus: onUnmountAutoFocusProp,\n    ...scopeProps\n  } = props;\n  const [container, setContainer] = React.useState(null);\n  const onMountAutoFocus = useCallbackRef(onMountAutoFocusProp);\n  const onUnmountAutoFocus = useCallbackRef(onUnmountAutoFocusProp);\n  const lastFocusedElementRef = React.useRef(null);\n  const composedRefs = useComposedRefs(forwardedRef, (node) => setContainer(node));\n  const focusScope = React.useRef({\n    paused: false,\n    pause() {\n      this.paused = true;\n    },\n    resume() {\n      this.paused = false;\n    }\n  }).current;\n  React.useEffect(() => {\n    if (trapped) {\n      let handleFocusIn2 = function(event) {\n        if (focusScope.paused || !container) return;\n        const target = event.target;\n        if (container.contains(target)) {\n          lastFocusedElementRef.current = target;\n        } else {\n          focus(lastFocusedElementRef.current, { select: true });\n        }\n      }, handleFocusOut2 = function(event) {\n        if (focusScope.paused || !container) return;\n        const relatedTarget = event.relatedTarget;\n        if (relatedTarget === null) return;\n        if (!container.contains(relatedTarget)) {\n          focus(lastFocusedElementRef.current, { select: true });\n        }\n      }, handleMutations2 = function(mutations) {\n        const focusedElement = document.activeElement;\n        if (focusedElement !== document.body) return;\n        for (const mutation of mutations) {\n          if (mutation.removedNodes.length > 0) focus(container);\n        }\n      };\n      var handleFocusIn = handleFocusIn2, handleFocusOut = handleFocusOut2, handleMutations = handleMutations2;\n      document.addEventListener(\"focusin\", handleFocusIn2);\n      document.addEventListener(\"focusout\", handleFocusOut2);\n      const mutationObserver = new MutationObserver(handleMutations2);\n      if (container) mutationObserver.observe(container, { childList: true, subtree: true });\n      return () => {\n        document.removeEventListener(\"focusin\", handleFocusIn2);\n        document.removeEventListener(\"focusout\", handleFocusOut2);\n        mutationObserver.disconnect();\n      };\n    }\n  }, [trapped, container, focusScope.paused]);\n  React.useEffect(() => {\n    if (container) {\n      focusScopesStack.add(focusScope);\n      const previouslyFocusedElement = document.activeElement;\n      const hasFocusedCandidate = container.contains(previouslyFocusedElement);\n      if (!hasFocusedCandidate) {\n        const mountEvent = new CustomEvent(AUTOFOCUS_ON_MOUNT, EVENT_OPTIONS);\n        container.addEventListener(AUTOFOCUS_ON_MOUNT, onMountAutoFocus);\n        container.dispatchEvent(mountEvent);\n        if (!mountEvent.defaultPrevented) {\n          focusFirst(removeLinks(getTabbableCandidates(container)), { select: true });\n          if (document.activeElement === previouslyFocusedElement) {\n            focus(container);\n          }\n        }\n      }\n      return () => {\n        container.removeEventListener(AUTOFOCUS_ON_MOUNT, onMountAutoFocus);\n        setTimeout(() => {\n          const unmountEvent = new CustomEvent(AUTOFOCUS_ON_UNMOUNT, EVENT_OPTIONS);\n          container.addEventListener(AUTOFOCUS_ON_UNMOUNT, onUnmountAutoFocus);\n          container.dispatchEvent(unmountEvent);\n          if (!unmountEvent.defaultPrevented) {\n            focus(previouslyFocusedElement ?? document.body, { select: true });\n          }\n          container.removeEventListener(AUTOFOCUS_ON_UNMOUNT, onUnmountAutoFocus);\n          focusScopesStack.remove(focusScope);\n        }, 0);\n      };\n    }\n  }, [container, onMountAutoFocus, onUnmountAutoFocus, focusScope]);\n  const handleKeyDown = React.useCallback(\n    (event) => {\n      if (!loop && !trapped) return;\n      if (focusScope.paused) return;\n      const isTabKey = event.key === \"Tab\" && !event.altKey && !event.ctrlKey && !event.metaKey;\n      const focusedElement = document.activeElement;\n      if (isTabKey && focusedElement) {\n        const container2 = event.currentTarget;\n        const [first, last] = getTabbableEdges(container2);\n        const hasTabbableElementsInside = first && last;\n        if (!hasTabbableElementsInside) {\n          if (focusedElement === container2) event.preventDefault();\n        } else {\n          if (!event.shiftKey && focusedElement === last) {\n            event.preventDefault();\n            if (loop) focus(first, { select: true });\n          } else if (event.shiftKey && focusedElement === first) {\n            event.preventDefault();\n            if (loop) focus(last, { select: true });\n          }\n        }\n      }\n    },\n    [loop, trapped, focusScope.paused]\n  );\n  return /* @__PURE__ */ jsx(Primitive.div, { tabIndex: -1, ...scopeProps, ref: composedRefs, onKeyDown: handleKeyDown });\n});\nFocusScope.displayName = FOCUS_SCOPE_NAME;\nfunction focusFirst(candidates, { select = false } = {}) {\n  const previouslyFocusedElement = document.activeElement;\n  for (const candidate of candidates) {\n    focus(candidate, { select });\n    if (document.activeElement !== previouslyFocusedElement) return;\n  }\n}\nfunction getTabbableEdges(container) {\n  const candidates = getTabbableCandidates(container);\n  const first = findVisible(candidates, container);\n  const last = findVisible(candidates.reverse(), container);\n  return [first, last];\n}\nfunction getTabbableCandidates(container) {\n  const nodes = [];\n  const walker = document.createTreeWalker(container, NodeFilter.SHOW_ELEMENT, {\n    acceptNode: (node) => {\n      const isHiddenInput = node.tagName === \"INPUT\" && node.type === \"hidden\";\n      if (node.disabled || node.hidden || isHiddenInput) return NodeFilter.FILTER_SKIP;\n      return node.tabIndex >= 0 ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;\n    }\n  });\n  while (walker.nextNode()) nodes.push(walker.currentNode);\n  return nodes;\n}\nfunction findVisible(elements, container) {\n  for (const element of elements) {\n    if (!isHidden(element, { upTo: container })) return element;\n  }\n}\nfunction isHidden(node, { upTo }) {\n  if (getComputedStyle(node).visibility === \"hidden\") return true;\n  while (node) {\n    if (upTo !== void 0 && node === upTo) return false;\n    if (getComputedStyle(node).display === \"none\") return true;\n    node = node.parentElement;\n  }\n  return false;\n}\nfunction isSelectableInput(element) {\n  return element instanceof HTMLInputElement && \"select\" in element;\n}\nfunction focus(element, { select = false } = {}) {\n  if (element && element.focus) {\n    const previouslyFocusedElement = document.activeElement;\n    element.focus({ preventScroll: true });\n    if (element !== previouslyFocusedElement && isSelectableInput(element) && select)\n      element.select();\n  }\n}\nvar focusScopesStack = createFocusScopesStack();\nfunction createFocusScopesStack() {\n  let stack = [];\n  return {\n    add(focusScope) {\n      const activeFocusScope = stack[0];\n      if (focusScope !== activeFocusScope) {\n        activeFocusScope?.pause();\n      }\n      stack = arrayRemove(stack, focusScope);\n      stack.unshift(focusScope);\n    },\n    remove(focusScope) {\n      stack = arrayRemove(stack, focusScope);\n      stack[0]?.resume();\n    }\n  };\n}\nfunction arrayRemove(array, item) {\n  const updatedArray = [...array];\n  const index = updatedArray.indexOf(item);\n  if (index !== -1) {\n    updatedArray.splice(index, 1);\n  }\n  return updatedArray;\n}\nfunction removeLinks(items) {\n  return items.filter((item) => item.tagName !== \"A\");\n}\nvar Root = FocusScope;\nexport {\n  FocusScope,\n  Root\n};\n//# sourceMappingURL=index.mjs.map\n"],"names":["AUTOFOCUS_ON_MOUNT","AUTOFOCUS_ON_UNMOUNT","EVENT_OPTIONS","FOCUS_SCOPE_NAME","FocusScope","React","props","forwardedRef","loop","trapped","onMountAutoFocusProp","onUnmountAutoFocusProp","scopeProps","container","setContainer","onMountAutoFocus","useCallbackRef","onUnmountAutoFocus","lastFocusedElementRef","composedRefs","useComposedRefs","node","focusScope","handleFocusIn2","event","target","focus","handleFocusOut2","relatedTarget","handleMutations2","mutations","mutation","mutationObserver","focusScopesStack","previouslyFocusedElement","mountEvent","focusFirst","removeLinks","getTabbableCandidates","unmountEvent","handleKeyDown","isTabKey","focusedElement","container2","first","last","getTabbableEdges","jsx","Primitive","candidates","select","candidate","findVisible","nodes","walker","isHiddenInput","elements","element","isHidden","upTo","isSelectableInput","createFocusScopesStack","stack","activeFocusScope","arrayRemove","array","item","updatedArray","index","items"],"mappings":"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","x_google_ignoreList":[0]}
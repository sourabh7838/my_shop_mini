{"version":3,"file":"visual-element-variant.js","sources":["../../../../../../../../../../../../../node_modules/.pnpm/motion@12.17.3_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/motion/dist/es/framer-motion/dist/es/animation/interfaces/visual-element-variant.mjs"],"sourcesContent":["import { resolveVariant } from '../../render/utils/resolve-dynamic-variants.mjs';\nimport { animateTarget } from './visual-element-target.mjs';\n\nfunction animateVariant(visualElement, variant, options = {}) {\n    const resolved = resolveVariant(visualElement, variant, options.type === \"exit\"\n        ? visualElement.presenceContext?.custom\n        : undefined);\n    let { transition = visualElement.getDefaultTransition() || {} } = resolved || {};\n    if (options.transitionOverride) {\n        transition = options.transitionOverride;\n    }\n    /**\n     * If we have a variant, create a callback that runs it as an animation.\n     * Otherwise, we resolve a Promise immediately for a composable no-op.\n     */\n    const getAnimation = resolved\n        ? () => Promise.all(animateTarget(visualElement, resolved, options))\n        : () => Promise.resolve();\n    /**\n     * If we have children, create a callback that runs all their animations.\n     * Otherwise, we resolve a Promise immediately for a composable no-op.\n     */\n    const getChildAnimations = visualElement.variantChildren && visualElement.variantChildren.size\n        ? (forwardDelay = 0) => {\n            const { delayChildren = 0, staggerChildren, staggerDirection, } = transition;\n            return animateChildren(visualElement, variant, delayChildren + forwardDelay, staggerChildren, staggerDirection, options);\n        }\n        : () => Promise.resolve();\n    /**\n     * If the transition explicitly defines a \"when\" option, we need to resolve either\n     * this animation or all children animations before playing the other.\n     */\n    const { when } = transition;\n    if (when) {\n        const [first, last] = when === \"beforeChildren\"\n            ? [getAnimation, getChildAnimations]\n            : [getChildAnimations, getAnimation];\n        return first().then(() => last());\n    }\n    else {\n        return Promise.all([getAnimation(), getChildAnimations(options.delay)]);\n    }\n}\nfunction animateChildren(visualElement, variant, delayChildren = 0, staggerChildren = 0, staggerDirection = 1, options) {\n    const animations = [];\n    const maxStaggerDuration = (visualElement.variantChildren.size - 1) * staggerChildren;\n    const generateStaggerDuration = staggerDirection === 1\n        ? (i = 0) => i * staggerChildren\n        : (i = 0) => maxStaggerDuration - i * staggerChildren;\n    Array.from(visualElement.variantChildren)\n        .sort(sortByTreeOrder)\n        .forEach((child, i) => {\n        child.notify(\"AnimationStart\", variant);\n        animations.push(animateVariant(child, variant, {\n            ...options,\n            delay: delayChildren + generateStaggerDuration(i),\n        }).then(() => child.notify(\"AnimationComplete\", variant)));\n    });\n    return Promise.all(animations);\n}\nfunction sortByTreeOrder(a, b) {\n    return a.sortNodePosition(b);\n}\n\nexport { animateVariant, sortByTreeOrder };\n"],"names":["animateVariant","visualElement","variant","options","resolved","resolveVariant","transition","getAnimation","animateTarget","getChildAnimations","forwardDelay","delayChildren","staggerChildren","staggerDirection","animateChildren","when","first","last","animations","maxStaggerDuration","generateStaggerDuration","i","sortByTreeOrder","child","a","b"],"mappings":";;AAGA,SAASA,EAAeC,GAAeC,GAASC,IAAU,CAAA,GAAI;AAC1D,QAAMC,IAAWC,EAAeJ,GAAeC,GAASC,EAAQ,SAAS,SACnEF,EAAc,iBAAiB,SAC/B,MAAS;AACf,MAAI,EAAE,YAAAK,IAAaL,EAAc,qBAAsB,KAAI,CAAE,EAAA,IAAKG,KAAY,CAAE;AAChF,EAAID,EAAQ,uBACRG,IAAaH,EAAQ;AAMzB,QAAMI,IAAeH,IACf,MAAM,QAAQ,IAAII,EAAcP,GAAeG,GAAUD,CAAO,CAAC,IACjE,MAAM,QAAQ,QAAS,GAKvBM,IAAqBR,EAAc,mBAAmBA,EAAc,gBAAgB,OACpF,CAACS,IAAe,MAAM;AACpB,UAAM,EAAE,eAAAC,IAAgB,GAAG,iBAAAC,GAAiB,kBAAAC,EAAmB,IAAGP;AAClE,WAAOQ,EAAgBb,GAAeC,GAASS,IAAgBD,GAAcE,GAAiBC,GAAkBV,CAAO;AAAA,EACnI,IACU,MAAM,QAAQ,QAAS,GAKvB,EAAE,MAAAY,EAAI,IAAKT;AACjB,MAAIS,GAAM;AACN,UAAM,CAACC,GAAOC,CAAI,IAAIF,MAAS,mBACzB,CAACR,GAAcE,CAAkB,IACjC,CAACA,GAAoBF,CAAY;AACvC,WAAOS,EAAO,EAAC,KAAK,MAAMC,EAAI,CAAE;AAAA,EACxC;AAEQ,WAAO,QAAQ,IAAI,CAACV,EAAY,GAAIE,EAAmBN,EAAQ,KAAK,CAAC,CAAC;AAE9E;AACA,SAASW,EAAgBb,GAAeC,GAASS,IAAgB,GAAGC,IAAkB,GAAGC,IAAmB,GAAGV,GAAS;AACpH,QAAMe,IAAa,CAAE,GACfC,KAAsBlB,EAAc,gBAAgB,OAAO,KAAKW,GAChEQ,IAA0BP,MAAqB,IAC/C,CAACQ,IAAI,MAAMA,IAAIT,IACf,CAACS,IAAI,MAAMF,IAAqBE,IAAIT;AAC1C,eAAM,KAAKX,EAAc,eAAe,EACnC,KAAKqB,CAAe,EACpB,QAAQ,CAACC,GAAOF,MAAM;AACvB,IAAAE,EAAM,OAAO,kBAAkBrB,CAAO,GACtCgB,EAAW,KAAKlB,EAAeuB,GAAOrB,GAAS;AAAA,MAC3C,GAAGC;AAAA,MACH,OAAOQ,IAAgBS,EAAwBC,CAAC;AAAA,IAC5D,CAAS,EAAE,KAAK,MAAME,EAAM,OAAO,qBAAqBrB,CAAO,CAAC,CAAC;AAAA,EACjE,CAAK,GACM,QAAQ,IAAIgB,CAAU;AACjC;AACA,SAASI,EAAgBE,GAAGC,GAAG;AAC3B,SAAOD,EAAE,iBAAiBC,CAAC;AAC/B;","x_google_ignoreList":[0]}
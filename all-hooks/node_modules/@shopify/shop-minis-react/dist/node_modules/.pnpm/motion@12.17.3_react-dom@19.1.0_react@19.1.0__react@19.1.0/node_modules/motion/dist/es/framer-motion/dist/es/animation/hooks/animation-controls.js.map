{"version":3,"file":"animation-controls.js","sources":["../../../../../../../../../../../../../node_modules/.pnpm/motion@12.17.3_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/motion/dist/es/framer-motion/dist/es/animation/hooks/animation-controls.mjs"],"sourcesContent":["import { setTarget } from '../../render/utils/setters.mjs';\nimport { animateVisualElement } from '../interfaces/visual-element.mjs';\nimport { invariant } from '../../../../../motion-utils/dist/es/errors.mjs';\n\nfunction stopAnimation(visualElement) {\n    visualElement.values.forEach((value) => value.stop());\n}\nfunction setVariants(visualElement, variantLabels) {\n    const reversedLabels = [...variantLabels].reverse();\n    reversedLabels.forEach((key) => {\n        const variant = visualElement.getVariant(key);\n        variant && setTarget(visualElement, variant);\n        if (visualElement.variantChildren) {\n            visualElement.variantChildren.forEach((child) => {\n                setVariants(child, variantLabels);\n            });\n        }\n    });\n}\nfunction setValues(visualElement, definition) {\n    if (Array.isArray(definition)) {\n        return setVariants(visualElement, definition);\n    }\n    else if (typeof definition === \"string\") {\n        return setVariants(visualElement, [definition]);\n    }\n    else {\n        setTarget(visualElement, definition);\n    }\n}\n/**\n * @public\n */\nfunction animationControls() {\n    /**\n     * Track whether the host component has mounted.\n     */\n    let hasMounted = false;\n    /**\n     * A collection of linked component animation controls.\n     */\n    const subscribers = new Set();\n    const controls = {\n        subscribe(visualElement) {\n            subscribers.add(visualElement);\n            return () => void subscribers.delete(visualElement);\n        },\n        start(definition, transitionOverride) {\n            invariant(hasMounted, \"controls.start() should only be called after a component has mounted. Consider calling within a useEffect hook.\");\n            const animations = [];\n            subscribers.forEach((visualElement) => {\n                animations.push(animateVisualElement(visualElement, definition, {\n                    transitionOverride,\n                }));\n            });\n            return Promise.all(animations);\n        },\n        set(definition) {\n            invariant(hasMounted, \"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook.\");\n            return subscribers.forEach((visualElement) => {\n                setValues(visualElement, definition);\n            });\n        },\n        stop() {\n            subscribers.forEach((visualElement) => {\n                stopAnimation(visualElement);\n            });\n        },\n        mount() {\n            hasMounted = true;\n            return () => {\n                hasMounted = false;\n                controls.stop();\n            };\n        },\n    };\n    return controls;\n}\n\nexport { animationControls, setValues };\n"],"names":["stopAnimation","visualElement","value","setVariants","variantLabels","key","variant","setTarget","child","setValues","definition","animationControls","hasMounted","subscribers","controls","transitionOverride","invariant","animations","animateVisualElement"],"mappings":";;;AAIA,SAASA,EAAcC,GAAe;AAClC,EAAAA,EAAc,OAAO,QAAQ,CAACC,MAAUA,EAAM,MAAM;AACxD;AACA,SAASC,EAAYF,GAAeG,GAAe;AAE/C,EADuB,CAAC,GAAGA,CAAa,EAAE,QAAS,EACpC,QAAQ,CAACC,MAAQ;AAC5B,UAAMC,IAAUL,EAAc,WAAWI,CAAG;AAC5C,IAAAC,KAAWC,EAAUN,GAAeK,CAAO,GACvCL,EAAc,mBACdA,EAAc,gBAAgB,QAAQ,CAACO,MAAU;AAC7C,MAAAL,EAAYK,GAAOJ,CAAa;AAAA,IAChD,CAAa;AAAA,EAEb,CAAK;AACL;AACA,SAASK,EAAUR,GAAeS,GAAY;AAC1C,MAAI,MAAM,QAAQA,CAAU;AACxB,WAAOP,EAAYF,GAAeS,CAAU;AAE3C,MAAI,OAAOA,KAAe;AAC3B,WAAOP,EAAYF,GAAe,CAACS,CAAU,CAAC;AAG9C,EAAAH,EAAUN,GAAeS,CAAU;AAE3C;AAIA,SAASC,IAAoB;AAIzB,MAAIC,IAAa;AAIjB,QAAMC,IAAc,oBAAI,IAAK,GACvBC,IAAW;AAAA,IACb,UAAUb,GAAe;AACrB,aAAAY,EAAY,IAAIZ,CAAa,GACtB,MAAM,KAAKY,EAAY,OAAOZ,CAAa;AAAA,IACrD;AAAA,IACD,MAAMS,GAAYK,GAAoB;AAClC,MAAAC,EAAUJ,GAAY,iHAAiH;AACvI,YAAMK,IAAa,CAAE;AACrB,aAAAJ,EAAY,QAAQ,CAACZ,MAAkB;AACnC,QAAAgB,EAAW,KAAKC,EAAqBjB,GAAeS,GAAY;AAAA,UAC5D,oBAAAK;AAAA,QACpB,CAAiB,CAAC;AAAA,MAClB,CAAa,GACM,QAAQ,IAAIE,CAAU;AAAA,IAChC;AAAA,IACD,IAAIP,GAAY;AACZ,aAAAM,EAAUJ,GAAY,+GAA+G,GAC9HC,EAAY,QAAQ,CAACZ,MAAkB;AAC1C,QAAAQ,EAAUR,GAAeS,CAAU;AAAA,MACnD,CAAa;AAAA,IACJ;AAAA,IACD,OAAO;AACH,MAAAG,EAAY,QAAQ,CAACZ,MAAkB;AACnC,QAAAD,EAAcC,CAAa;AAAA,MAC3C,CAAa;AAAA,IACJ;AAAA,IACD,QAAQ;AACJ,aAAAW,IAAa,IACN,MAAM;AACT,QAAAA,IAAa,IACbE,EAAS,KAAM;AAAA,MAClB;AAAA,IACJ;AAAA,EACJ;AACD,SAAOA;AACX;","x_google_ignoreList":[0]}
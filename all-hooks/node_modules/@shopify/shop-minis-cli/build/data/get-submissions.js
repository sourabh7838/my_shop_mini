import { graphql } from './types/autogenerated/shop-minis-admin-api/gql.js';
import { client } from './gql-client.js';
const getSubmissionQuery = graphql(/* GraphQL */ `
  query Submissions($first: Int) {
    submissions(first: $first) {
      nodes {
        reference
        description
        status
        submittedAt
      }
      pageInfo {
        hasNextPage
        hasPreviousPage
        startCursor
        endCursor
      }
    }
  }
`);
export const getSubmissions = async ({ first = 10, } = {}) => {
    const data = await client.request(getSubmissionQuery, { first }, {});
    return data.submissions;
};
export async function getPendingSubmission() {
    const submissions = await getSubmissions();
    const pendingSubmissions = submissions.nodes.filter(submission => submission.status === 'PENDING');
    // There should only ever be one
    if (pendingSubmissions.length)
        return pendingSubmissions[0];
    return null;
}
//# sourceMappingURL=get-submissions.js.map
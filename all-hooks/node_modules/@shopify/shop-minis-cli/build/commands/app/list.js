import { Command } from 'commander';
import { outputInfo } from '@shopify/cli-kit/node/output';
import { handler as handleError } from '@shopify/cli-kit/node/error';
import { renderTable } from '@shopify/cli-kit/node/ui';
import { getLinkedApps } from '../../data/get-linked-apps.js';
import { extractIdFromGID } from '../../utils/extract-id-gid.js';
import { assertNetworkAndAuth } from '../../utils/common-tasks.js';
export const command = new Command()
    .name('list')
    .description('List all linked Shopify apps.')
    .action(async () => {
    try {
        await assertNetworkAndAuth();
        const linkedApps = await getLinkedApps();
        const rows = [];
        if (linkedApps.productionShopifyApp) {
            rows.push({
                id: extractIdFromGID(linkedApps.productionShopifyApp.id),
                title: linkedApps.productionShopifyApp.title,
                type: 'production',
            });
        }
        linkedApps.developmentShopifyApps?.forEach(app => {
            rows.push({
                id: extractIdFromGID(app.id),
                title: app.title,
                type: 'development',
            });
        });
        outputInfo('');
        renderTable({
            rows,
            columns: {
                title: { header: 'Title' },
                type: { header: 'Type' },
                id: { header: 'ID' },
            },
        });
        outputInfo('');
    }
    catch (error) {
        handleError(error);
    }
});
//# sourceMappingURL=list.js.map
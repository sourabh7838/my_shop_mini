import path from 'node:path';
import { readFileSync, writeFileSync } from 'node:fs';
import { SemVer } from 'semver';
/**
 * Adds warning about changing babel plugins or presets in babel config file
 *
 * Diff: https://github.com/Shopify/shop-minis-cli/compare/v0.0.75...v0.0.76
 */
async function applyUpgrade() {
    const findString = 'module.exports = {';
    const replaceString = `module.exports = {
  // Changes to babel config are not supported by the mini platform.
  // Custom configuration can introduce unexpected behaviour in your mini and could be a cause of rejection during the submission process.`;
    const babelConfigFilePath = path.join(process.cwd(), 'babel.config.js');
    const babelConfigContent = readFileSync(babelConfigFilePath, {
        encoding: 'utf-8',
    });
    const newBabelConfigContent = babelConfigContent.replace(findString, replaceString);
    writeFileSync(babelConfigFilePath, newBabelConfigContent, {
        encoding: 'utf-8',
    });
}
const releaseNotes = [
    'Adds explicit warning about custom babel preset or plugins in babel config file',
];
const exports = {
    releaseNotes,
    applyUpgrade,
    version: new SemVer('0.0.76'),
};
export default exports;
//# sourceMappingURL=v0-0-76.js.map
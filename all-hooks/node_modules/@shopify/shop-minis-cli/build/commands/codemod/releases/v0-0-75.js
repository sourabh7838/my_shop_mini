import path from 'node:path';
import { readFileSync, writeFileSync } from 'node:fs';
import { SemVer } from 'semver';
/**
 * Changes how native modules are registered during development
 *
 * Diff: https://github.com/Shopify/shop-minis-cli/compare/v0.0.74...v0.0.75
 */
async function applyUpgrade() {
    const findString = "import 'react-native-gesture-handler'";
    const replaceString = "import '@shopify/shop-minis-platform-sdk/src/utils/registerNativeModules'";
    const indexFilePath = path.join(process.cwd(), 'index.tsx');
    const indexFileContent = readFileSync(indexFilePath, {
        encoding: 'utf-8',
    });
    const newIndexContent = indexFileContent.replace(findString, replaceString);
    writeFileSync(indexFilePath, newIndexContent, {
        encoding: 'utf-8',
    });
}
const releaseNotes = [
    'Import the native module needed for IntersectionObserver',
];
const exports = {
    releaseNotes,
    applyUpgrade,
    version: new SemVer('0.0.75'),
};
export default exports;
//# sourceMappingURL=v0-0-75.js.map
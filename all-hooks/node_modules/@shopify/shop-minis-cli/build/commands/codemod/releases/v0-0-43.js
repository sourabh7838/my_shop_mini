import fs from 'node:fs';
import path from 'node:path';
import { SemVer } from 'semver';
/**
 * - Adds url-parse and @types/url-parse dependencies
 *
 * Diff: https://github.com/Shopify/shop-minis-cli/compare/v0.0.42...v0.0.43
 */
async function applyUpgrade() {
    const packageJsonPath = path.join(process.cwd(), 'package.json');
    const packageJsonString = fs.readFileSync(packageJsonPath, {
        encoding: 'utf-8',
    });
    const packageJson = JSON.parse(packageJsonString);
    // add url-parse and @types/url-parse dependencies
    packageJson.devDependencies ||= {};
    packageJson.devDependencies['url-parse'] = '^1.5.10';
    packageJson.devDependencies['@types/url-parse'] = '^1.4.8';
    // persist updated package.json
    fs.writeFileSync(packageJsonPath, `${JSON.stringify(packageJson, null, 2)}\n`, // keep the new line at the end of the file
    {
        encoding: 'utf-8',
    });
}
const releaseNotes = ['Added dependencies url-parse and @types/url-parse.'];
const exports = {
    releaseNotes,
    applyUpgrade,
    version: new SemVer('0.0.43'),
};
export default exports;
//# sourceMappingURL=v0-0-43.js.map
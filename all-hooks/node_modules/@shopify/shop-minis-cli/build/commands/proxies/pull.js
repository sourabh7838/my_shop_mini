import { Command } from 'commander';
import { renderConfirmationPrompt, renderSuccess } from '@shopify/cli-kit/node/ui';
import { handler as handleError } from '@shopify/cli-kit/node/error';
import { assertNetworkAndAuth } from '../../utils/common-tasks.js';
import { proxiesList } from '../../data/proxies/proxies-list.js';
import { setMiniManifestProxies } from '../../utils/minis-manifest.js';
import { remoteProxiesToManifestProxies } from '../../utils/proxies.js';
export const command = new Command()
    .name('pull')
    .description('Synchronize your local proxy configuration.')
    .action(async () => {
    try {
        await assertNetworkAndAuth();
        const shouldContinue = await renderConfirmationPrompt({
            message: [
                'This will overwrite your local proxy configuration with the remote configuration. Are you sure you want to continue?',
            ],
        });
        if (!shouldContinue)
            return;
        const remoteProxies = remoteProxiesToManifestProxies(await proxiesList());
        setMiniManifestProxies(remoteProxies);
        renderSuccess({
            headline: 'Proxy configuration synced',
            body: [
                'Your manifest.json has been updated with the remote proxy configuration.',
            ],
        });
    }
    catch (error) {
        handleError(error);
    }
});
//# sourceMappingURL=pull.js.map
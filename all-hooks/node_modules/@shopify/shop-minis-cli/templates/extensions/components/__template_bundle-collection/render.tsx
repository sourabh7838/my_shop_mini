import {BundleCollection} from '@shopify/shop-minis-ui-extensions'
import {useExtensionShopActions} from '@shopify/shop-minis-platform-sdk/actions'

import type {__QUERY_NAME__QueryData} from './input.graphql'
import seedData from './seed'

export function Render({
  extensionData,
}: {
  extensionData: __QUERY_NAME__QueryData | null
}) {
  const {openMiniViewer} = useExtensionShopActions()

  // Here we are using seed data to populate the initial state of the bundle collection.
  // You can replace this with the actual data from `extensionData`
  __EXAMPLE_QUERY_DATA_USE__
  const {bundles: initialBundles, title} = seedData

  const bundles = initialBundles.map(initialBundle => {
    return {
      ...initialBundle,
      onActionButtonPress: () => {
        openMiniViewer(initialBundle)
      },
    }
  })

  if (!bundles) return null

  return <BundleCollection title={title} bundles={bundles} />
}
